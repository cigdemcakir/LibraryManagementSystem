2023-11-08 09:06:18.764 +03:00 [INF] User profile is available. Using '/Users/Levent/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2023-11-08 09:06:19.427 +03:00 [INF] Now listening on: https://localhost:7109
2023-11-08 09:06:19.429 +03:00 [INF] Now listening on: http://localhost:5223
2023-11-08 09:06:19.430 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-08 09:06:19.431 +03:00 [INF] Hosting environment: Development
2023-11-08 09:06:19.431 +03:00 [INF] Content root path: /Users/Levent/Desktop/SanctionScanner/BackEnd/src/LibraryManagement.WebApi
2023-11-08 09:06:19.947 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/swagger/index.html - -
2023-11-08 09:06:20.145 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/swagger/index.html - - - 200 - text/html;charset=utf-8 200.2355ms
2023-11-08 09:06:20.454 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/swagger/v1/swagger.json - -
2023-11-08 09:06:20.648 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 193.4370ms
2023-11-08 09:08:09.305 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 09:08:09.329 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:08:09.410 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:08:09.434 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:08:11.806 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 09:08:11.871 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 09:08:11.930 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 2490.1758ms
2023-11-08 09:08:11.931 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:08:11.955 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 2650.4281ms
2023-11-08 09:09:15.149 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 09:09:15.152 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:09:15.154 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:09:15.155 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:09:15.206 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 09:09:15.208 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 09:09:15.210 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 53.8209ms
2023-11-08 09:09:15.210 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:09:15.211 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 62.0440ms
2023-11-08 09:09:51.105 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 09:09:51.107 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:09:51.111 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:09:51.111 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:09:51.196 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 09:09:51.197 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 09:09:51.197 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 86.3428ms
2023-11-08 09:09:51.198 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:09:51.198 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 92.8559ms
2023-11-08 09:10:21.009 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 09:10:21.010 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:10:21.010 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:10:21.010 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:10:21.014 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 09:10:21.015 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 09:10:21.015 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 5.0666ms
2023-11-08 09:10:21.016 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:10:21.016 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 6.9195ms
2023-11-08 09:12:52.269 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 09:12:52.272 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:12:52.273 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:12:52.275 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:12:52.284 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 09:12:52.286 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 09:12:52.287 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 11.4729ms
2023-11-08 09:12:52.287 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:12:52.288 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 19.4735ms
2023-11-08 09:21:40.551 +03:00 [INF] Application is shutting down...
2023-11-08 09:33:23.084 +03:00 [INF] User profile is available. Using '/Users/Levent/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2023-11-08 09:33:23.782 +03:00 [INF] Now listening on: https://localhost:7109
2023-11-08 09:33:23.782 +03:00 [INF] Now listening on: http://localhost:5223
2023-11-08 09:33:23.784 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-08 09:33:23.784 +03:00 [INF] Hosting environment: Development
2023-11-08 09:33:23.784 +03:00 [INF] Content root path: /Users/Levent/Desktop/SanctionScanner/BackEnd/src/LibraryManagement.WebApi
2023-11-08 09:33:24.226 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/swagger/index.html - -
2023-11-08 09:33:24.438 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/swagger/index.html - - - 200 - text/html;charset=utf-8 213.3796ms
2023-11-08 09:33:24.756 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/swagger/v1/swagger.json - -
2023-11-08 09:33:24.922 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 166.1631ms
2023-11-08 09:33:30.516 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 09:33:30.532 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:33:30.612 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:33:30.628 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:33:33.022 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 09:33:33.086 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 09:33:33.144 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 2510.6035ms
2023-11-08 09:33:33.146 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:33:33.176 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 2660.1735ms
2023-11-08 09:34:32.358 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 09:34:32.368 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:34:32.369 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 10.8676ms
2023-11-08 09:34:32.375 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 09:34:32.378 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:34:32.380 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:34:32.380 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:34:32.392 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 09:34:32.393 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:34:32.395 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 09:34:32.404 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 09:34:32.404 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 11.3793ms
2023-11-08 09:34:32.421 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=hOZ3oP5SHues15pOsxoUpg - -
2023-11-08 09:34:32.421 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:34:32.421 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 09:34:32.428 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 09:34:32.431 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 09:34:32.432 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 51.1384ms
2023-11-08 09:34:32.432 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:34:32.433 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 57.8088ms
2023-11-08 09:34:52.817 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books/a3f71772-a295-4ee6-dc7a-08dbdedf146b/checkout - -
2023-11-08 09:34:52.818 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:34:52.818 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books/a3f71772-a295-4ee6-dc7a-08dbdedf146b/checkout - - - 204 - - 1.2344ms
2023-11-08 09:34:52.837 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7109/api/Books/a3f71772-a295-4ee6-dc7a-08dbdedf146b/checkout application/json 93
2023-11-08 09:34:52.838 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:34:52.838 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi)'
2023-11-08 09:34:52.854 +03:00 [INF] Route matched with {action = "Checkout", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(System.Guid, Application.Features.Books.Commands.CheckoutBook.BookCheckoutCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:34:53.181 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Author], [t].[CreatedByUserId], [t].[CreatedOn], [t].[DeletedByUserId], [t].[DeletedOn], [t].[Genre], [t].[ImageUrl], [t].[IsAvailable], [t].[IsDeleted], [t].[ModifiedByUserId], [t].[ModifiedOn], [t].[Title], [l].[Id], [l].[BookId], [l].[CreatedByUserId], [l].[CreatedOn], [l].[DeletedByUserId], [l].[DeletedOn], [l].[DueDate], [l].[IsDeleted], [l].[LoanDate], [l].[LoanedOutTo], [l].[ModifiedByUserId], [l].[ModifiedOn], [l].[ReturnedDate]
FROM (
    SELECT TOP(1) [b].[Id], [b].[Author], [b].[CreatedByUserId], [b].[CreatedOn], [b].[DeletedByUserId], [b].[DeletedOn], [b].[Genre], [b].[ImageUrl], [b].[IsAvailable], [b].[IsDeleted], [b].[ModifiedByUserId], [b].[ModifiedOn], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__request_BookId_0
) AS [t]
LEFT JOIN [Loans] AS [l] ON [t].[Id] = [l].[BookId]
ORDER BY [t].[Id]
2023-11-08 09:34:53.553 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Boolean), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (DbType = DateTimeOffset), @p8='?' (DbType = DateTimeOffset), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 200), @p12='?' (Size = 4000), @p13='?' (DbType = DateTimeOffset), @p14='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Books] SET [IsAvailable] = @p0
OUTPUT 1
WHERE [Id] = @p1;
INSERT INTO [Loans] ([Id], [BookId], [CreatedByUserId], [CreatedOn], [DeletedByUserId], [DeletedOn], [DueDate], [IsDeleted], [LoanDate], [LoanedOutTo], [ModifiedByUserId], [ModifiedOn], [ReturnedDate])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2023-11-08 09:34:53.592 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 09:34:53.596 +03:00 [INF] Executed action WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi) in 741.6576ms
2023-11-08 09:34:53.596 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi)'
2023-11-08 09:34:53.596 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7109/api/Books/a3f71772-a295-4ee6-dc7a-08dbdedf146b/checkout application/json 93 - 200 - application/json;+charset=utf-8 759.6328ms
2023-11-08 09:34:53.603 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 09:34:53.603 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:34:53.603 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:34:53.603 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:34:53.608 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 09:34:53.608 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 09:34:53.610 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 6.4134ms
2023-11-08 09:34:53.610 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:34:53.610 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 7.6394ms
2023-11-08 09:35:02.769 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 09:35:02.769 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 09:35:02.770 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:35:02.770 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:35:02.770 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:35:02.770 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.9953ms
2023-11-08 09:35:02.770 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:35:02.772 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 09:35:02.772 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:35:02.773 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 09:35:02.774 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 09:35:02.774 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 2.0476ms
2023-11-08 09:35:02.776 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 09:35:02.779 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 09:35:02.780 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 9.3873ms
2023-11-08 09:35:02.780 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:35:02.781 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 11.1441ms
2023-11-08 09:35:02.803 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=d1uM73UQWm46Uy-W4sjAAg - -
2023-11-08 09:35:02.804 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:35:02.804 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 09:35:14.617 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books/7f93c92f-fee9-4f23-4637-08dbdf8a6bb0/checkout - -
2023-11-08 09:35:14.617 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:35:14.618 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books/7f93c92f-fee9-4f23-4637-08dbdf8a6bb0/checkout - - - 204 - - 0.8119ms
2023-11-08 09:35:14.628 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7109/api/Books/7f93c92f-fee9-4f23-4637-08dbdf8a6bb0/checkout application/json 93
2023-11-08 09:35:14.629 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:35:14.629 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi)'
2023-11-08 09:35:14.629 +03:00 [INF] Route matched with {action = "Checkout", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(System.Guid, Application.Features.Books.Commands.CheckoutBook.BookCheckoutCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:35:14.638 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Author], [t].[CreatedByUserId], [t].[CreatedOn], [t].[DeletedByUserId], [t].[DeletedOn], [t].[Genre], [t].[ImageUrl], [t].[IsAvailable], [t].[IsDeleted], [t].[ModifiedByUserId], [t].[ModifiedOn], [t].[Title], [l].[Id], [l].[BookId], [l].[CreatedByUserId], [l].[CreatedOn], [l].[DeletedByUserId], [l].[DeletedOn], [l].[DueDate], [l].[IsDeleted], [l].[LoanDate], [l].[LoanedOutTo], [l].[ModifiedByUserId], [l].[ModifiedOn], [l].[ReturnedDate]
FROM (
    SELECT TOP(1) [b].[Id], [b].[Author], [b].[CreatedByUserId], [b].[CreatedOn], [b].[DeletedByUserId], [b].[DeletedOn], [b].[Genre], [b].[ImageUrl], [b].[IsAvailable], [b].[IsDeleted], [b].[ModifiedByUserId], [b].[ModifiedOn], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__request_BookId_0
) AS [t]
LEFT JOIN [Loans] AS [l] ON [t].[Id] = [l].[BookId]
ORDER BY [t].[Id]
2023-11-08 09:35:14.649 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Boolean), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (DbType = DateTimeOffset), @p8='?' (DbType = DateTimeOffset), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 200), @p12='?' (Size = 4000), @p13='?' (DbType = DateTimeOffset), @p14='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Books] SET [IsAvailable] = @p0
OUTPUT 1
WHERE [Id] = @p1;
INSERT INTO [Loans] ([Id], [BookId], [CreatedByUserId], [CreatedOn], [DeletedByUserId], [DeletedOn], [DueDate], [IsDeleted], [LoanDate], [LoanedOutTo], [ModifiedByUserId], [ModifiedOn], [ReturnedDate])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2023-11-08 09:35:14.654 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 09:35:14.654 +03:00 [INF] Executed action WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi) in 24.6186ms
2023-11-08 09:35:14.654 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi)'
2023-11-08 09:35:14.654 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7109/api/Books/7f93c92f-fee9-4f23-4637-08dbdf8a6bb0/checkout application/json 93 - 200 - application/json;+charset=utf-8 26.2151ms
2023-11-08 09:35:14.664 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 09:35:14.664 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:35:14.664 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:35:14.665 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:35:14.668 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 09:35:14.669 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 09:35:14.669 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 4.0253ms
2023-11-08 09:35:14.669 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:35:14.669 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 5.2497ms
2023-11-08 09:35:25.434 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books/7f93c92f-fee9-4f23-4637-08dbdf8a6bb0/return - -
2023-11-08 09:35:25.435 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:35:25.436 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books/7f93c92f-fee9-4f23-4637-08dbdf8a6bb0/return - - - 204 - - 1.3536ms
2023-11-08 09:35:25.437 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7109/api/Books/7f93c92f-fee9-4f23-4637-08dbdf8a6bb0/return application/json 49
2023-11-08 09:35:25.437 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:35:25.437 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi)'
2023-11-08 09:35:25.441 +03:00 [INF] Route matched with {action = "Return", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Return(Application.Features.Books.Commands.AddBook.BookReturnCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:35:25.469 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [l].[Id], [l].[BookId], [l].[CreatedByUserId], [l].[CreatedOn], [l].[DeletedByUserId], [l].[DeletedOn], [l].[DueDate], [l].[IsDeleted], [l].[LoanDate], [l].[LoanedOutTo], [l].[ModifiedByUserId], [l].[ModifiedOn], [l].[ReturnedDate]
FROM [Loans] AS [l]
WHERE [l].[BookId] = @__request_BookId_0 AND ([l].[ReturnedDate] IS NULL)
2023-11-08 09:35:25.477 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CreatedByUserId], [b].[CreatedOn], [b].[DeletedByUserId], [b].[DeletedOn], [b].[Genre], [b].[ImageUrl], [b].[IsAvailable], [b].[IsDeleted], [b].[ModifiedByUserId], [b].[ModifiedOn], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__request_BookId_0
2023-11-08 09:35:25.489 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Boolean), @p3='?' (DbType = Guid), @p2='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Books] SET [IsAvailable] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Loans] SET [ReturnedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2023-11-08 09:35:25.494 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 09:35:25.494 +03:00 [INF] Executed action WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi) in 52.9092ms
2023-11-08 09:35:25.495 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi)'
2023-11-08 09:35:25.495 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7109/api/Books/7f93c92f-fee9-4f23-4637-08dbdf8a6bb0/return application/json 49 - 200 - application/json;+charset=utf-8 57.9094ms
2023-11-08 09:35:27.083 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books/a3f71772-a295-4ee6-dc7a-08dbdedf146b/return - -
2023-11-08 09:35:27.084 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:35:27.084 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books/a3f71772-a295-4ee6-dc7a-08dbdedf146b/return - - - 204 - - 0.6705ms
2023-11-08 09:35:27.085 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7109/api/Books/a3f71772-a295-4ee6-dc7a-08dbdedf146b/return application/json 49
2023-11-08 09:35:27.085 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:35:27.085 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi)'
2023-11-08 09:35:27.085 +03:00 [INF] Route matched with {action = "Return", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Return(Application.Features.Books.Commands.AddBook.BookReturnCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:35:27.090 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [l].[Id], [l].[BookId], [l].[CreatedByUserId], [l].[CreatedOn], [l].[DeletedByUserId], [l].[DeletedOn], [l].[DueDate], [l].[IsDeleted], [l].[LoanDate], [l].[LoanedOutTo], [l].[ModifiedByUserId], [l].[ModifiedOn], [l].[ReturnedDate]
FROM [Loans] AS [l]
WHERE [l].[BookId] = @__request_BookId_0 AND ([l].[ReturnedDate] IS NULL)
2023-11-08 09:35:27.092 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CreatedByUserId], [b].[CreatedOn], [b].[DeletedByUserId], [b].[DeletedOn], [b].[Genre], [b].[ImageUrl], [b].[IsAvailable], [b].[IsDeleted], [b].[ModifiedByUserId], [b].[ModifiedOn], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__request_BookId_0
2023-11-08 09:35:27.095 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Boolean), @p3='?' (DbType = Guid), @p2='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Books] SET [IsAvailable] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Loans] SET [ReturnedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2023-11-08 09:35:27.099 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 09:35:27.099 +03:00 [INF] Executed action WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi) in 13.1747ms
2023-11-08 09:35:27.099 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi)'
2023-11-08 09:35:27.099 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7109/api/Books/a3f71772-a295-4ee6-dc7a-08dbdedf146b/return application/json 49 - 200 - application/json;+charset=utf-8 14.3260ms
2023-11-08 09:35:30.820 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 09:35:30.820 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=hOZ3oP5SHues15pOsxoUpg - - - 101 - - 58398.5315ms
2023-11-08 09:35:31.887 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 09:35:31.889 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:35:31.889 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 09:35:31.889 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 1.6515ms
2023-11-08 09:35:31.889 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:35:31.889 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:35:31.890 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:35:31.892 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 09:35:31.893 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:35:31.893 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 09:35:31.894 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 09:35:31.895 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 2.4275ms
2023-11-08 09:35:31.900 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 09:35:31.901 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 09:35:31.902 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 11.711ms
2023-11-08 09:35:31.902 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:35:31.902 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 13.4649ms
2023-11-08 09:35:31.927 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=ecCBCo59PRLWMaKmm7LOZA - -
2023-11-08 09:35:31.927 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:35:31.928 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 09:39:38.687 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 09:39:38.687 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 09:39:38.687 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=d1uM73UQWm46Uy-W4sjAAg - - - 101 - - 275880.6472ms
2023-11-08 09:39:38.687 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=ecCBCo59PRLWMaKmm7LOZA - - - 101 - - 246757.5030ms
2023-11-08 09:52:21.211 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Authentication/Login - -
2023-11-08 09:52:21.218 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:52:21.219 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Authentication/Login - - - 204 - - 9.6003ms
2023-11-08 09:52:21.221 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/api/Authentication/Login application/json 26
2023-11-08 09:52:21.224 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:52:21.226 +03:00 [INF] Executing endpoint 'WebApi.Controllers.AuthenticationController.LoginAsync (LibraryManagement.WebApi)'
2023-11-08 09:52:21.250 +03:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Application.Features.Auth.Commands.Login.AuthLoginCommand) on controller WebApi.Controllers.AuthenticationController (LibraryManagement.WebApi).
2023-11-08 09:52:21.584 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-11-08 09:52:21.603 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Application.Common.Models.Errors.ApiErrorDto'.
2023-11-08 09:52:21.609 +03:00 [INF] Executed action WebApi.Controllers.AuthenticationController.LoginAsync (LibraryManagement.WebApi) in 358.6368ms
2023-11-08 09:52:21.609 +03:00 [INF] Executed endpoint 'WebApi.Controllers.AuthenticationController.LoginAsync (LibraryManagement.WebApi)'
2023-11-08 09:52:21.610 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/api/Authentication/Login application/json 26 - 400 - application/json;+charset=utf-8 388.8505ms
2023-11-08 09:52:25.652 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignInStart - -
2023-11-08 09:52:25.652 +03:00 [INF] Executing endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi)'
2023-11-08 09:52:25.654 +03:00 [INF] Route matched with {action = "GoogleSignInStart", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GoogleSignInStartAsync() on controller WebApi.Controllers.AuthenticationController (LibraryManagement.WebApi).
2023-11-08 09:52:25.664 +03:00 [INF] Executing RedirectResult, redirecting to https://accounts.google.com/o/oauth2/v2/auth?client_id=424536091498-qqtt1rg7jtr9hr99hbrvokl7krq5ls6g.apps.googleusercontent.com&response_type=code&scope=openid%20email%20profile&access_type=offline&redirect_uri=https://localhost:7109/api/Authentication/GoogleSignIn.
2023-11-08 09:52:25.664 +03:00 [INF] Executed action WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi) in 10.1175ms
2023-11-08 09:52:25.664 +03:00 [INF] Executed endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi)'
2023-11-08 09:52:25.665 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignInStart - - - 302 0 - 12.9332ms
2023-11-08 09:52:25.972 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignIn?code=4%2F0AfJohXkbCBYB1AfqOEegepU0FyquP3ydMzGTYoFFMIYn5K2teuI2utzs0ITuKuOyAGu91Q&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=0&prompt=none - -
2023-11-08 09:52:25.978 +03:00 [INF] Executing endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInAsync (LibraryManagement.WebApi)'
2023-11-08 09:52:25.983 +03:00 [INF] Route matched with {action = "GoogleSignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GoogleSignInAsync(System.String, System.Threading.CancellationToken) on controller WebApi.Controllers.AuthenticationController (LibraryManagement.WebApi).
2023-11-08 09:52:26.682 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedByUserId], [a].[CreatedOn], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[ModifiedByUserId], [a].[ModifiedOn], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2023-11-08 09:52:26.927 +03:00 [INF] Executing RedirectResult, redirecting to http://localhost:5173/social-login?access_token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiIyYTVjNjQ2NC01ODYzLTRhMjItOWNiYS1lOGIxYjYxYTYwYTQiLCJlbWFpbCI6IjRzb2Z0d2FyZWhvdXNlNEBnbWFpbC5jb20iLCJzdWIiOiIyYTVjNjQ2NC01ODYzLTRhMjItOWNiYS1lOGIxYjYxYTYwYTQiLCJnaXZlbl9uYW1lIjoiU29mdHdhcmUiLCJmYW1pbHlfbmFtZSI6IkhvdXNlIiwianRpIjoiY2E1OWVhZWItNDVhOS00YzlmLWFmZmItZjgxYmQ1YmM2ZTcxIiwiZXhwIjoxNjk5NDI5OTQ2LCJpc3MiOiJDcmF3bGVyIiwiYXVkIjoiQ3Jhd2xlciJ9.rANjPvAVJGyKM6xLxfjkqjVj6J3f-zi3ZH9gJ3PSrHE&expiry_date=-8585021769387031158.
2023-11-08 09:52:26.927 +03:00 [INF] Executed action WebApi.Controllers.AuthenticationController.GoogleSignInAsync (LibraryManagement.WebApi) in 944.3766ms
2023-11-08 09:52:26.927 +03:00 [INF] Executed endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInAsync (LibraryManagement.WebApi)'
2023-11-08 09:52:26.928 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignIn?code=4%2F0AfJohXkbCBYB1AfqOEegepU0FyquP3ydMzGTYoFFMIYn5K2teuI2utzs0ITuKuOyAGu91Q&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=0&prompt=none - - - 302 0 - 955.9738ms
2023-11-08 09:52:27.133 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 09:52:27.134 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:52:27.134 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.6778ms
2023-11-08 09:52:27.136 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 09:52:27.136 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:52:27.136 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:52:27.137 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:52:27.144 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 09:52:27.145 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 09:52:27.145 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 8.4125ms
2023-11-08 09:52:27.146 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:52:27.146 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 10.1594ms
2023-11-08 09:52:27.167 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 09:52:27.167 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:52:27.167 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 09:52:27.168 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 09:52:27.168 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 1.5002ms
2023-11-08 09:52:27.209 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=nSoBjTTDHX__jGAownFoIA - -
2023-11-08 09:52:27.209 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:52:27.209 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 09:52:57.337 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignInStart - -
2023-11-08 09:52:57.338 +03:00 [INF] Executing endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi)'
2023-11-08 09:52:57.339 +03:00 [INF] Route matched with {action = "GoogleSignInStart", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GoogleSignInStartAsync() on controller WebApi.Controllers.AuthenticationController (LibraryManagement.WebApi).
2023-11-08 09:52:57.339 +03:00 [INF] Executing RedirectResult, redirecting to https://accounts.google.com/o/oauth2/v2/auth?client_id=424536091498-qqtt1rg7jtr9hr99hbrvokl7krq5ls6g.apps.googleusercontent.com&response_type=code&scope=openid%20email%20profile&access_type=offline&redirect_uri=https://localhost:7109/api/Authentication/GoogleSignIn.
2023-11-08 09:52:57.340 +03:00 [INF] Executed action WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi) in 0.5643ms
2023-11-08 09:52:57.340 +03:00 [INF] Executed endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi)'
2023-11-08 09:52:57.340 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignInStart - - - 302 0 - 2.7814ms
2023-11-08 09:52:57.659 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignIn?code=4%2F0AfJohXmYAuSU-_RSZhIL7ss1-MpRVDz5vBJdsG21PTVWdhgQXj9cNzWS8qipQR4RkvpVWQ&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=0&prompt=none - -
2023-11-08 09:52:57.659 +03:00 [INF] Executing endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInAsync (LibraryManagement.WebApi)'
2023-11-08 09:52:57.659 +03:00 [INF] Route matched with {action = "GoogleSignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GoogleSignInAsync(System.String, System.Threading.CancellationToken) on controller WebApi.Controllers.AuthenticationController (LibraryManagement.WebApi).
2023-11-08 09:52:57.869 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedByUserId], [a].[CreatedOn], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[ModifiedByUserId], [a].[ModifiedOn], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2023-11-08 09:52:57.871 +03:00 [INF] Executing RedirectResult, redirecting to http://localhost:5173/social-login?access_token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiIyYTVjNjQ2NC01ODYzLTRhMjItOWNiYS1lOGIxYjYxYTYwYTQiLCJlbWFpbCI6IjRzb2Z0d2FyZWhvdXNlNEBnbWFpbC5jb20iLCJzdWIiOiIyYTVjNjQ2NC01ODYzLTRhMjItOWNiYS1lOGIxYjYxYTYwYTQiLCJnaXZlbl9uYW1lIjoiU29mdHdhcmUiLCJmYW1pbHlfbmFtZSI6IkhvdXNlIiwianRpIjoiNWE0YWI3ZWUtZTM3Ny00ZWVlLThjNWEtNzIzYjc1YzVjNDQxIiwiZXhwIjoxNjk5NDI5OTc3LCJpc3MiOiJDcmF3bGVyIiwiYXVkIjoiQ3Jhd2xlciJ9.ucb9C9U0aVMydJg1X5yqX3AHR7qyxFY2ucmaFHLdsmk&expiry_date=-8585021769076071758.
2023-11-08 09:52:57.871 +03:00 [INF] Executed action WebApi.Controllers.AuthenticationController.GoogleSignInAsync (LibraryManagement.WebApi) in 211.7105ms
2023-11-08 09:52:57.871 +03:00 [INF] Executed endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInAsync (LibraryManagement.WebApi)'
2023-11-08 09:52:57.872 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignIn?code=4%2F0AfJohXmYAuSU-_RSZhIL7ss1-MpRVDz5vBJdsG21PTVWdhgQXj9cNzWS8qipQR4RkvpVWQ&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=0&prompt=none - - - 302 0 - 212.9203ms
2023-11-08 09:52:57.901 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 09:52:57.901 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=nSoBjTTDHX__jGAownFoIA - - - 101 - - 30691.9747ms
2023-11-08 09:52:58.080 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 09:52:58.081 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:52:58.081 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.5470ms
2023-11-08 09:52:58.082 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 09:52:58.083 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 09:52:58.083 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:52:58.083 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:52:58.083 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 09:52:58.083 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:52:58.083 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:52:58.083 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 09:52:58.084 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 1.1433ms
2023-11-08 09:52:58.087 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 09:52:58.087 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 09:52:58.088 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 4.6565ms
2023-11-08 09:52:58.088 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:52:58.088 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 5.8295ms
2023-11-08 09:52:58.111 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=FFFRGfV8b28CyRu1JJ_7dg - -
2023-11-08 09:52:58.112 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:52:58.112 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 09:54:30.085 +03:00 [INF] Application is shutting down...
2023-11-08 09:54:30.092 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 09:54:30.092 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=FFFRGfV8b28CyRu1JJ_7dg - - - 101 - - 91979.6755ms
2023-11-08 09:54:34.223 +03:00 [INF] User profile is available. Using '/Users/Levent/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2023-11-08 09:54:34.944 +03:00 [INF] Now listening on: https://localhost:7109
2023-11-08 09:54:34.944 +03:00 [INF] Now listening on: http://localhost:5223
2023-11-08 09:54:34.946 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-08 09:54:34.946 +03:00 [INF] Hosting environment: Development
2023-11-08 09:54:34.946 +03:00 [INF] Content root path: /Users/Levent/Desktop/SanctionScanner/BackEnd/src/LibraryManagement.WebApi
2023-11-08 09:54:35.594 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/swagger/index.html - -
2023-11-08 09:54:35.802 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/swagger/index.html - - - 200 - text/html;charset=utf-8 210.5109ms
2023-11-08 09:54:36.085 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/swagger/v1/swagger.json - -
2023-11-08 09:54:36.266 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 180.5658ms
2023-11-08 09:54:54.144 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignInStart - -
2023-11-08 09:54:54.220 +03:00 [INF] Executing endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi)'
2023-11-08 09:54:54.234 +03:00 [INF] Route matched with {action = "GoogleSignInStart", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GoogleSignInStartAsync() on controller WebApi.Controllers.AuthenticationController (LibraryManagement.WebApi).
2023-11-08 09:54:54.470 +03:00 [INF] Executing RedirectResult, redirecting to https://accounts.google.com/o/oauth2/v2/auth?client_id=424536091498-qqtt1rg7jtr9hr99hbrvokl7krq5ls6g.apps.googleusercontent.com&response_type=code&scope=openid%20email%20profile&access_type=offline&redirect_uri=https://localhost:7109/api/Authentication/GoogleSignIn.
2023-11-08 09:54:54.475 +03:00 [INF] Executed action WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi) in 236.5607ms
2023-11-08 09:54:54.478 +03:00 [INF] Executed endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi)'
2023-11-08 09:54:54.481 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignInStart - - - 302 0 - 336.7493ms
2023-11-08 09:55:12.851 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 09:55:12.862 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 09:55:12.863 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:55:12.865 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:55:12.865 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 13.5438ms
2023-11-08 09:55:12.867 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:55:12.873 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:55:12.882 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 09:55:12.883 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:55:12.886 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 09:55:12.896 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 09:55:12.896 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 13.5149ms
2023-11-08 09:55:12.915 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=G6B0EznXyCAcOeoViNB9Gw - -
2023-11-08 09:55:12.915 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:55:12.915 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 09:55:14.894 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 09:55:14.953 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 09:55:14.997 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 2123.8778ms
2023-11-08 09:55:14.998 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:55:15.020 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 2157.6194ms
2023-11-08 09:55:18.088 +03:00 [INF] Application is shutting down...
2023-11-08 09:55:18.113 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 09:55:18.113 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=G6B0EznXyCAcOeoViNB9Gw - - - 101 - - 5198.2987ms
2023-11-08 09:55:20.079 +03:00 [INF] User profile is available. Using '/Users/Levent/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2023-11-08 09:55:20.758 +03:00 [INF] Now listening on: https://localhost:7109
2023-11-08 09:55:20.759 +03:00 [INF] Now listening on: http://localhost:5223
2023-11-08 09:55:20.761 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-08 09:55:20.761 +03:00 [INF] Hosting environment: Development
2023-11-08 09:55:20.761 +03:00 [INF] Content root path: /Users/Levent/Desktop/SanctionScanner/BackEnd/src/LibraryManagement.WebApi
2023-11-08 09:55:21.327 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/swagger/index.html - -
2023-11-08 09:55:21.517 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/swagger/index.html - - - 200 - text/html;charset=utf-8 191.9731ms
2023-11-08 09:55:21.744 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/swagger/v1/swagger.json - -
2023-11-08 09:55:21.915 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 171.0945ms
2023-11-08 09:56:34.560 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Authentication/Login - -
2023-11-08 09:56:34.578 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:56:34.583 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Authentication/Login - - - 204 - - 22.1442ms
2023-11-08 09:56:34.584 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/api/Authentication/Login application/json 26
2023-11-08 09:56:34.588 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:56:34.634 +03:00 [INF] Executing endpoint 'WebApi.Controllers.AuthenticationController.LoginAsync (LibraryManagement.WebApi)'
2023-11-08 09:56:34.656 +03:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Application.Features.Auth.Commands.Login.AuthLoginCommand) on controller WebApi.Controllers.AuthenticationController (LibraryManagement.WebApi).
2023-11-08 09:56:37.397 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-11-08 09:56:37.496 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Application.Common.Models.Errors.ApiErrorDto'.
2023-11-08 09:56:37.516 +03:00 [INF] Executed action WebApi.Controllers.AuthenticationController.LoginAsync (LibraryManagement.WebApi) in 2851.7769ms
2023-11-08 09:56:37.519 +03:00 [INF] Executed endpoint 'WebApi.Controllers.AuthenticationController.LoginAsync (LibraryManagement.WebApi)'
2023-11-08 09:56:37.585 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/api/Authentication/Login application/json 26 - 400 - application/json;+charset=utf-8 3000.6818ms
2023-11-08 09:56:38.049 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/api/Authentication/Login application/json 26
2023-11-08 09:56:38.063 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:56:38.084 +03:00 [INF] Executing endpoint 'WebApi.Controllers.AuthenticationController.LoginAsync (LibraryManagement.WebApi)'
2023-11-08 09:56:38.102 +03:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Application.Features.Auth.Commands.Login.AuthLoginCommand) on controller WebApi.Controllers.AuthenticationController (LibraryManagement.WebApi).
2023-11-08 09:56:38.206 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-11-08 09:56:38.209 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Application.Common.Models.Errors.ApiErrorDto'.
2023-11-08 09:56:38.210 +03:00 [INF] Executed action WebApi.Controllers.AuthenticationController.LoginAsync (LibraryManagement.WebApi) in 107.8543ms
2023-11-08 09:56:38.210 +03:00 [INF] Executed endpoint 'WebApi.Controllers.AuthenticationController.LoginAsync (LibraryManagement.WebApi)'
2023-11-08 09:56:38.211 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/api/Authentication/Login application/json 26 - 400 - application/json;+charset=utf-8 162.5793ms
2023-11-08 09:56:52.975 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Authentication/Login - -
2023-11-08 09:56:52.976 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:56:52.977 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Authentication/Login - - - 204 - - 2.7733ms
2023-11-08 09:56:52.981 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/api/Authentication/Login application/json 26
2023-11-08 09:56:52.981 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:56:52.984 +03:00 [INF] Executing endpoint 'WebApi.Controllers.AuthenticationController.LoginAsync (LibraryManagement.WebApi)'
2023-11-08 09:56:52.984 +03:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Application.Features.Auth.Commands.Login.AuthLoginCommand) on controller WebApi.Controllers.AuthenticationController (LibraryManagement.WebApi).
2023-11-08 09:56:53.022 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-11-08 09:56:53.024 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Application.Common.Models.Errors.ApiErrorDto'.
2023-11-08 09:56:53.024 +03:00 [INF] Executed action WebApi.Controllers.AuthenticationController.LoginAsync (LibraryManagement.WebApi) in 40.216ms
2023-11-08 09:56:53.025 +03:00 [INF] Executed endpoint 'WebApi.Controllers.AuthenticationController.LoginAsync (LibraryManagement.WebApi)'
2023-11-08 09:56:53.025 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/api/Authentication/Login application/json 26 - 400 - application/json;+charset=utf-8 44.2218ms
2023-11-08 09:56:58.731 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignInStart - -
2023-11-08 09:56:58.732 +03:00 [INF] Executing endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi)'
2023-11-08 09:56:58.736 +03:00 [INF] Route matched with {action = "GoogleSignInStart", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GoogleSignInStartAsync() on controller WebApi.Controllers.AuthenticationController (LibraryManagement.WebApi).
2023-11-08 09:56:58.739 +03:00 [INF] Executing RedirectResult, redirecting to https://accounts.google.com/o/oauth2/v2/auth?client_id=424536091498-qqtt1rg7jtr9hr99hbrvokl7krq5ls6g.apps.googleusercontent.com&response_type=code&scope=openid%20email%20profile&access_type=offline&redirect_uri=https://localhost:7109/api/Authentication/GoogleSignIn.
2023-11-08 09:56:58.739 +03:00 [INF] Executed action WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi) in 2.8433ms
2023-11-08 09:56:58.739 +03:00 [INF] Executed endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi)'
2023-11-08 09:56:58.739 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignInStart - - - 302 0 - 8.1107ms
2023-11-08 09:57:01.357 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignIn?code=4%2F0AfJohXls9TZJat1OfIKebw19sFRUi3B_HswPKj9Yep1XK6Cg13a8zuXgReMqHdSiGZ4QAg&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=consent - -
2023-11-08 09:57:01.364 +03:00 [INF] Executing endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInAsync (LibraryManagement.WebApi)'
2023-11-08 09:57:01.370 +03:00 [INF] Route matched with {action = "GoogleSignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GoogleSignInAsync(System.String, System.Threading.CancellationToken) on controller WebApi.Controllers.AuthenticationController (LibraryManagement.WebApi).
2023-11-08 09:57:02.117 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedByUserId], [a].[CreatedOn], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[ModifiedByUserId], [a].[ModifiedOn], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2023-11-08 09:57:02.418 +03:00 [INF] Executing RedirectResult, redirecting to http://localhost:5173/social-login?access_token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiIyYTVjNjQ2NC01ODYzLTRhMjItOWNiYS1lOGIxYjYxYTYwYTQiLCJlbWFpbCI6IjRzb2Z0d2FyZWhvdXNlNEBnbWFpbC5jb20iLCJzdWIiOiIyYTVjNjQ2NC01ODYzLTRhMjItOWNiYS1lOGIxYjYxYTYwYTQiLCJnaXZlbl9uYW1lIjoiU29mdHdhcmUiLCJmYW1pbHlfbmFtZSI6IkhvdXNlIiwianRpIjoiZDhkZTcxYWEtMDI1Yy00ZDZhLTljM2YtMjEyODU1ZGM4YTBiIiwiZXhwIjoxNjk5NDMwMjIyLCJpc3MiOiJDcmF3bGVyIiwiYXVkIjoiQ3Jhd2xlciJ9.oe_Hem0Phpn_0UpqwECHmx4TifF8ZsVvpM3-tutRgkk&expiry_date=-8585021766632044648.
2023-11-08 09:57:02.418 +03:00 [INF] Executed action WebApi.Controllers.AuthenticationController.GoogleSignInAsync (LibraryManagement.WebApi) in 1048.2177ms
2023-11-08 09:57:02.418 +03:00 [INF] Executed endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInAsync (LibraryManagement.WebApi)'
2023-11-08 09:57:02.419 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignIn?code=4%2F0AfJohXls9TZJat1OfIKebw19sFRUi3B_HswPKj9Yep1XK6Cg13a8zuXgReMqHdSiGZ4QAg&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=consent - - - 302 0 - 1062.1407ms
2023-11-08 09:57:02.757 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 09:57:02.758 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:57:02.759 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 1.8131ms
2023-11-08 09:57:02.764 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 09:57:02.764 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:57:02.765 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:57:02.772 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 09:57:02.800 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 09:57:02.801 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:57:02.801 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 09:57:02.811 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 09:57:02.811 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 10.8246ms
2023-11-08 09:57:02.921 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=lNsNSm0_pAudg4DLcWqRIQ - -
2023-11-08 09:57:02.921 +03:00 [INF] CORS policy execution successful.
2023-11-08 09:57:02.921 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 09:57:03.037 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 09:57:03.042 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 09:57:03.098 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 325.0391ms
2023-11-08 09:57:03.098 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 09:57:03.098 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 334.3631ms
2023-11-08 10:01:50.441 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Authentication/Login - -
2023-11-08 10:01:50.442 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:01:50.442 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Authentication/Login - - - 204 - - 1.1186ms
2023-11-08 10:01:50.443 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/api/Authentication/Login application/json 67
2023-11-08 10:01:50.444 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:01:50.477 +03:00 [INF] Executing endpoint 'WebApi.Controllers.AuthenticationController.LoginAsync (LibraryManagement.WebApi)'
2023-11-08 10:01:50.477 +03:00 [INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Application.Features.Auth.Commands.Login.AuthLoginCommand) on controller WebApi.Controllers.AuthenticationController (LibraryManagement.WebApi).
2023-11-08 10:01:50.488 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-11-08 10:01:50.496 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedByUserId], [a].[CreatedOn], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[ModifiedByUserId], [a].[ModifiedOn], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2023-11-08 10:01:50.518 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Application.Common.Models.Errors.ApiErrorDto'.
2023-11-08 10:01:50.526 +03:00 [INF] Executed action WebApi.Controllers.AuthenticationController.LoginAsync (LibraryManagement.WebApi) in 48.9168ms
2023-11-08 10:01:50.526 +03:00 [INF] Executed endpoint 'WebApi.Controllers.AuthenticationController.LoginAsync (LibraryManagement.WebApi)'
2023-11-08 10:01:50.526 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/api/Authentication/Login application/json 67 - 400 - application/json;+charset=utf-8 83.1789ms
2023-11-08 10:01:52.203 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignInStart - -
2023-11-08 10:01:52.203 +03:00 [INF] Executing endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi)'
2023-11-08 10:01:52.203 +03:00 [INF] Route matched with {action = "GoogleSignInStart", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GoogleSignInStartAsync() on controller WebApi.Controllers.AuthenticationController (LibraryManagement.WebApi).
2023-11-08 10:01:52.226 +03:00 [INF] Executing RedirectResult, redirecting to https://accounts.google.com/o/oauth2/v2/auth?client_id=424536091498-qqtt1rg7jtr9hr99hbrvokl7krq5ls6g.apps.googleusercontent.com&response_type=code&scope=openid%20email%20profile&access_type=offline&redirect_uri=https://localhost:7109/api/Authentication/GoogleSignIn.
2023-11-08 10:01:52.227 +03:00 [INF] Executed action WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi) in 0.8152ms
2023-11-08 10:01:52.227 +03:00 [INF] Executed endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi)'
2023-11-08 10:01:52.227 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignInStart - - - 302 0 - 24.5242ms
2023-11-08 10:01:54.978 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignIn?code=4%2F0AfJohXnkUm1SaQRGqHttShuu5P3g17-U4VX-Mgq_S_73E8NYyIdlv2Q-kxVBHySuhDmsfw&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=consent - -
2023-11-08 10:01:54.979 +03:00 [INF] Executing endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInAsync (LibraryManagement.WebApi)'
2023-11-08 10:01:54.979 +03:00 [INF] Route matched with {action = "GoogleSignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GoogleSignInAsync(System.String, System.Threading.CancellationToken) on controller WebApi.Controllers.AuthenticationController (LibraryManagement.WebApi).
2023-11-08 10:01:55.202 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedByUserId], [a].[CreatedOn], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[ModifiedByUserId], [a].[ModifiedOn], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2023-11-08 10:01:55.204 +03:00 [INF] Executing RedirectResult, redirecting to http://localhost:5173/social-login?access_token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiIyYTVjNjQ2NC01ODYzLTRhMjItOWNiYS1lOGIxYjYxYTYwYTQiLCJlbWFpbCI6IjRzb2Z0d2FyZWhvdXNlNEBnbWFpbC5jb20iLCJzdWIiOiIyYTVjNjQ2NC01ODYzLTRhMjItOWNiYS1lOGIxYjYxYTYwYTQiLCJnaXZlbl9uYW1lIjoiU29mdHdhcmUiLCJmYW1pbHlfbmFtZSI6IkhvdXNlIiwianRpIjoiMDlhODk1MGEtZGNlMy00Zjg2LTk4ZDUtMGFmYmIxYzgxNDFlIiwiZXhwIjoxNjk5NDMwNTE1LCJpc3MiOiJDcmF3bGVyIiwiYXVkIjoiQ3Jhd2xlciJ9.wPlWwlGCA5U9wdnAivEwH5iiUXE2-QfCPhd6eIe5V-A&expiry_date=-8585021763702744018.
2023-11-08 10:01:55.226 +03:00 [INF] Executed action WebApi.Controllers.AuthenticationController.GoogleSignInAsync (LibraryManagement.WebApi) in 246.8199ms
2023-11-08 10:01:55.226 +03:00 [INF] Executed endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInAsync (LibraryManagement.WebApi)'
2023-11-08 10:01:55.227 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignIn?code=4%2F0AfJohXnkUm1SaQRGqHttShuu5P3g17-U4VX-Mgq_S_73E8NYyIdlv2Q-kxVBHySuhDmsfw&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=consent - - - 302 0 - 248.1667ms
2023-11-08 10:01:55.567 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:01:55.568 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:01:55.568 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.7301ms
2023-11-08 10:01:55.579 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:01:55.580 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:01:55.624 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:01:55.627 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:01:55.627 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:01:55.627 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:01:55.627 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:01:55.629 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:01:55.629 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 4.4712ms
2023-11-08 10:01:55.637 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:01:55.638 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:01:55.639 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 11.6248ms
2023-11-08 10:01:55.639 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:01:55.676 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 97.1146ms
2023-11-08 10:01:55.768 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=vUPwSfAaXCa0iD7Y5_hDMw - -
2023-11-08 10:01:55.769 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:01:55.769 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:02:32.630 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:02:32.630 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:02:32.633 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:02:32.633 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:02:32.634 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 3.4058ms
2023-11-08 10:02:32.634 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:02:32.636 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:02:32.644 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:02:32.650 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:02:32.678 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:02:32.679 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:02:32.679 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:02:32.680 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:02:32.680 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 43.7739ms
2023-11-08 10:02:32.680 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 35.8493ms
2023-11-08 10:02:32.680 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:02:32.681 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 50.2824ms
2023-11-08 10:02:32.701 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=iNwyXj1zC9NLTpR5Jn9bPw - -
2023-11-08 10:02:32.702 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:02:32.702 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:04:38.069 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:04:38.069 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:04:38.070 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=iNwyXj1zC9NLTpR5Jn9bPw - - - 101 - - 125366.7825ms
2023-11-08 10:04:38.070 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=lNsNSm0_pAudg4DLcWqRIQ - - - 101 - - 455148.7476ms
2023-11-08 10:04:39.625 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:04:39.626 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:04:39.626 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:04:39.626 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:04:39.626 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.5853ms
2023-11-08 10:04:39.626 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:04:39.628 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:04:39.632 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:04:39.632 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:04:39.633 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:04:39.634 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:04:39.634 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 2.2103ms
2023-11-08 10:04:39.638 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:04:39.640 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:04:39.641 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 12.3033ms
2023-11-08 10:04:39.641 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:04:39.658 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=nx6cpHuqBOAvJhwUaHjUOA - -
2023-11-08 10:04:39.678 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:04:39.678 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 52.6966ms
2023-11-08 10:04:39.678 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:04:44.613 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:04:44.613 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=vUPwSfAaXCa0iD7Y5_hDMw - - - 101 - - 168843.0022ms
2023-11-08 10:04:45.853 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:04:45.854 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:04:45.854 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:04:45.854 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.8174ms
2023-11-08 10:04:45.854 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:04:45.856 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:04:45.878 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:04:45.878 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:04:45.878 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:04:45.878 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:04:45.879 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:04:45.879 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 22.8146ms
2023-11-08 10:04:45.881 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:04:45.882 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:04:45.882 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 3.9983ms
2023-11-08 10:04:45.882 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:04:45.883 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 28.9597ms
2023-11-08 10:04:45.899 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=SPsSlS_9nmOj7gZZCSWvGw - -
2023-11-08 10:04:45.899 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:04:45.900 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:05:51.738 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:05:51.739 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:05:51.739 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.9078ms
2023-11-08 10:05:51.744 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:05:51.745 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:05:51.745 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:05:51.745 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:05:51.750 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:05:51.779 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:05:51.779 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:05:51.780 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:05:51.780 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 29.6202ms
2023-11-08 10:05:51.782 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:05:51.783 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:05:51.783 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 4.5762ms
2023-11-08 10:05:51.783 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:05:51.784 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 39.1027ms
2023-11-08 10:05:51.799 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=7CgNQzoKDt3pFkK5KNljbQ - -
2023-11-08 10:05:51.799 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:05:51.799 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:06:54.270 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:06:54.271 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:06:54.271 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=7CgNQzoKDt3pFkK5KNljbQ - - - 101 - - 62471.2382ms
2023-11-08 10:06:54.271 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=nx6cpHuqBOAvJhwUaHjUOA - - - 101 - - 134611.6924ms
2023-11-08 10:06:55.837 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:06:55.837 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:06:55.837 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:06:55.837 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:06:55.838 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:06:55.838 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.8922ms
2023-11-08 10:06:55.838 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:06:55.840 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:06:55.840 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:06:55.840 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:06:55.841 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:06:55.842 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 1.6179ms
2023-11-08 10:06:55.844 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:06:55.866 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=WW5suPnvZYcJuXtl686kAg - -
2023-11-08 10:06:55.880 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:06:55.880 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:06:55.880 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:06:55.881 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 43.3048ms
2023-11-08 10:06:55.882 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:06:55.882 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 45.0374ms
2023-11-08 10:07:31.698 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books - -
2023-11-08 10:07:31.698 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:07:31.698 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books - - - 204 - - 0.6852ms
2023-11-08 10:07:31.700 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/api/Books application/json 152
2023-11-08 10:07:31.700 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:07:31.700 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi)'
2023-11-08 10:07:31.723 +03:00 [INF] Route matched with {action = "AddBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddBookAsync(Application.Features.Books.Commands.AddBook.BookAddCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:07:32.073 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 200), @p2='?' (Size = 4000), @p3='?' (DbType = DateTimeOffset), @p4='?' (Size = 4000), @p5='?' (DbType = DateTimeOffset), @p6='?' (DbType = Int32), @p7='?' (Size = 500), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [Author], [CreatedByUserId], [CreatedOn], [DeletedByUserId], [DeletedOn], [Genre], [ImageUrl], [IsAvailable], [IsDeleted], [ModifiedByUserId], [ModifiedOn], [Title])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2023-11-08 10:07:32.094 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 10:07:32.098 +03:00 [INF] Executed action WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi) in 374.7077ms
2023-11-08 10:07:32.098 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi)'
2023-11-08 10:07:32.098 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/api/Books application/json 152 - 200 - application/json;+charset=utf-8 398.9995ms
2023-11-08 10:07:32.121 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:07:32.121 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:07:32.122 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.9182ms
2023-11-08 10:07:32.127 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:07:32.127 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:07:32.128 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:07:32.128 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:07:32.133 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:07:32.136 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:07:32.169 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:07:32.170 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:07:32.170 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:07:32.171 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 42.35ms
2023-11-08 10:07:32.171 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:07:32.171 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:07:32.171 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 35.6282ms
2023-11-08 10:07:32.172 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 44.7629ms
2023-11-08 10:07:32.209 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=rLX6GNRag9ZmJrNaRGBvEQ - -
2023-11-08 10:07:32.209 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:07:32.209 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:07:48.002 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout - -
2023-11-08 10:07:48.003 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:07:48.003 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout - - - 204 - - 0.6810ms
2023-11-08 10:07:48.008 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout application/json 95
2023-11-08 10:07:48.009 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:07:48.019 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi)'
2023-11-08 10:07:48.024 +03:00 [INF] Route matched with {action = "Checkout", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(System.Guid, Application.Features.Books.Commands.CheckoutBook.BookCheckoutCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:07:48.186 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Author], [t].[CreatedByUserId], [t].[CreatedOn], [t].[DeletedByUserId], [t].[DeletedOn], [t].[Genre], [t].[ImageUrl], [t].[IsAvailable], [t].[IsDeleted], [t].[ModifiedByUserId], [t].[ModifiedOn], [t].[Title], [l].[Id], [l].[BookId], [l].[CreatedByUserId], [l].[CreatedOn], [l].[DeletedByUserId], [l].[DeletedOn], [l].[DueDate], [l].[IsDeleted], [l].[LoanDate], [l].[LoanedOutTo], [l].[ModifiedByUserId], [l].[ModifiedOn], [l].[ReturnedDate]
FROM (
    SELECT TOP(1) [b].[Id], [b].[Author], [b].[CreatedByUserId], [b].[CreatedOn], [b].[DeletedByUserId], [b].[DeletedOn], [b].[Genre], [b].[ImageUrl], [b].[IsAvailable], [b].[IsDeleted], [b].[ModifiedByUserId], [b].[ModifiedOn], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__request_BookId_0
) AS [t]
LEFT JOIN [Loans] AS [l] ON [t].[Id] = [l].[BookId]
ORDER BY [t].[Id]
2023-11-08 10:07:48.345 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Boolean), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (DbType = DateTimeOffset), @p8='?' (DbType = DateTimeOffset), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 200), @p12='?' (Size = 4000), @p13='?' (DbType = DateTimeOffset), @p14='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Books] SET [IsAvailable] = @p0
OUTPUT 1
WHERE [Id] = @p1;
INSERT INTO [Loans] ([Id], [BookId], [CreatedByUserId], [CreatedOn], [DeletedByUserId], [DeletedOn], [DueDate], [IsDeleted], [LoanDate], [LoanedOutTo], [ModifiedByUserId], [ModifiedOn], [ReturnedDate])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2023-11-08 10:07:48.407 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 10:07:48.407 +03:00 [INF] Executed action WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi) in 383.1922ms
2023-11-08 10:07:48.408 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi)'
2023-11-08 10:07:48.408 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout application/json 95 - 200 - application/json;+charset=utf-8 399.5175ms
2023-11-08 10:07:48.418 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:07:48.418 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:07:48.419 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:07:48.419 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:07:48.427 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:07:48.429 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:07:48.432 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 11.4057ms
2023-11-08 10:07:48.432 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:07:48.468 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 50.5600ms
2023-11-08 10:07:55.212 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/return - -
2023-11-08 10:07:55.212 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:07:55.212 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/return - - - 204 - - 0.8295ms
2023-11-08 10:07:55.214 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/return application/json 49
2023-11-08 10:07:55.214 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:07:55.217 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi)'
2023-11-08 10:07:55.222 +03:00 [INF] Route matched with {action = "Return", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Return(Application.Features.Books.Commands.AddBook.BookReturnCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:07:55.247 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [l].[Id], [l].[BookId], [l].[CreatedByUserId], [l].[CreatedOn], [l].[DeletedByUserId], [l].[DeletedOn], [l].[DueDate], [l].[IsDeleted], [l].[LoanDate], [l].[LoanedOutTo], [l].[ModifiedByUserId], [l].[ModifiedOn], [l].[ReturnedDate]
FROM [Loans] AS [l]
WHERE [l].[BookId] = @__request_BookId_0 AND ([l].[ReturnedDate] IS NULL)
2023-11-08 10:07:55.255 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CreatedByUserId], [b].[CreatedOn], [b].[DeletedByUserId], [b].[DeletedOn], [b].[Genre], [b].[ImageUrl], [b].[IsAvailable], [b].[IsDeleted], [b].[ModifiedByUserId], [b].[ModifiedOn], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__request_BookId_0
2023-11-08 10:07:55.278 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Boolean), @p3='?' (DbType = Guid), @p2='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Books] SET [IsAvailable] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Loans] SET [ReturnedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2023-11-08 10:07:55.282 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 10:07:55.283 +03:00 [INF] Executed action WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi) in 60.7468ms
2023-11-08 10:07:55.283 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi)'
2023-11-08 10:07:55.283 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/return application/json 49 - 200 - application/json;+charset=utf-8 69.0649ms
2023-11-08 10:09:47.980 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:09:47.981 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=SPsSlS_9nmOj7gZZCSWvGw - - - 101 - - 302091.8437ms
2023-11-08 10:09:49.462 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:09:49.463 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:09:49.463 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.6037ms
2023-11-08 10:09:49.465 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:09:49.465 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:09:49.468 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:09:49.468 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:09:49.474 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:09:49.475 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:09:49.476 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 7.5083ms
2023-11-08 10:09:49.476 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:09:49.476 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 11.3653ms
2023-11-08 10:09:49.502 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:09:49.502 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:09:49.503 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:09:49.503 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:09:49.504 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 1.5174ms
2023-11-08 10:09:49.528 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=aWI6rHNIO2L88bYOjxJJDw - -
2023-11-08 10:09:49.529 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:09:49.529 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:09:53.259 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:09:53.259 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:09:53.259 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=WW5suPnvZYcJuXtl686kAg - - - 101 - - 177404.2228ms
2023-11-08 10:09:53.259 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=rLX6GNRag9ZmJrNaRGBvEQ - - - 101 - - 141051.4422ms
2023-11-08 10:09:54.558 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:09:54.558 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:09:54.558 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:09:54.559 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.4625ms
2023-11-08 10:09:54.559 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:09:54.560 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:09:54.568 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:09:54.568 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:09:54.568 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:09:54.568 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:09:54.570 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:09:54.570 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 9.7943ms
2023-11-08 10:09:54.573 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:09:54.574 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:09:54.574 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 5.3722ms
2023-11-08 10:09:54.574 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:09:54.574 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 15.9102ms
2023-11-08 10:09:54.636 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=WLsPi5vDEjeiE3sPhvvNUA - -
2023-11-08 10:09:54.636 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:09:54.636 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:10:31.511 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:10:31.512 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:10:31.512 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 1.2727ms
2023-11-08 10:10:31.518 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:10:31.518 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:10:31.518 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:10:31.519 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:10:31.520 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:10:31.521 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:10:31.521 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:10:31.522 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:10:31.522 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 1.5932ms
2023-11-08 10:10:31.524 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:10:31.525 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:10:31.525 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 6.0228ms
2023-11-08 10:10:31.525 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:10:31.526 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 7.9533ms
2023-11-08 10:10:31.553 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=eoaKGiZaq7ONHBkUY1a-ag - -
2023-11-08 10:10:31.569 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:10:31.569 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:11:27.062 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books - -
2023-11-08 10:11:27.063 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:11:27.063 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books - - - 204 - - 0.7704ms
2023-11-08 10:11:27.064 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/api/Books application/json 152
2023-11-08 10:11:27.064 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:11:27.064 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi)'
2023-11-08 10:11:27.069 +03:00 [INF] Route matched with {action = "AddBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddBookAsync(Application.Features.Books.Commands.AddBook.BookAddCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:11:27.078 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 200), @p2='?' (Size = 4000), @p3='?' (DbType = DateTimeOffset), @p4='?' (Size = 4000), @p5='?' (DbType = DateTimeOffset), @p6='?' (DbType = Int32), @p7='?' (Size = 500), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [Author], [CreatedByUserId], [CreatedOn], [DeletedByUserId], [DeletedOn], [Genre], [ImageUrl], [IsAvailable], [IsDeleted], [ModifiedByUserId], [ModifiedOn], [Title])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2023-11-08 10:11:27.078 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 10:11:27.079 +03:00 [INF] Executed action WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi) in 9.36ms
2023-11-08 10:11:27.079 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi)'
2023-11-08 10:11:27.079 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/api/Books application/json 152 - 200 - application/json;+charset=utf-8 15.1558ms
2023-11-08 10:11:27.104 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:11:27.105 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:11:27.105 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.7757ms
2023-11-08 10:11:27.106 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:11:27.107 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:11:27.109 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:11:27.121 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:11:27.121 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:11:27.121 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:11:27.121 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:11:27.123 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:11:27.123 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 14.6272ms
2023-11-08 10:11:27.129 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:11:27.130 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:11:27.130 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 7.707ms
2023-11-08 10:11:27.130 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:11:27.130 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 24.1339ms
2023-11-08 10:11:27.147 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=X2jhUsTe744RWY2SyHuZEw - -
2023-11-08 10:11:27.148 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:11:27.148 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:11:53.069 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:11:53.069 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=X2jhUsTe744RWY2SyHuZEw - - - 101 - - 25921.6882ms
2023-11-08 10:11:53.070 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:11:53.070 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=eoaKGiZaq7ONHBkUY1a-ag - - - 101 - - 81516.3355ms
2023-11-08 10:11:53.072 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:11:53.072 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=WLsPi5vDEjeiE3sPhvvNUA - - - 101 - - 118434.8320ms
2023-11-08 10:11:54.414 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:11:54.415 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:11:54.415 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.6981ms
2023-11-08 10:11:54.415 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:11:54.416 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:11:54.418 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:11:54.419 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:11:54.420 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:11:54.419 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:11:54.430 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:11:54.431 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:11:54.432 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 14.2503ms
2023-11-08 10:11:54.439 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:11:54.457 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=3rvd2l3b4Mey7osM75Eqdw - -
2023-11-08 10:11:54.470 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:11:54.470 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:11:54.470 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:11:54.471 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 40.491ms
2023-11-08 10:11:54.471 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:11:54.471 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 55.8539ms
2023-11-08 10:11:57.699 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:11:57.699 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=aWI6rHNIO2L88bYOjxJJDw - - - 101 - - 128168.9146ms
2023-11-08 10:11:58.953 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:11:58.953 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:11:58.953 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:11:58.953 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:11:58.953 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.5285ms
2023-11-08 10:11:58.954 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:11:58.955 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:11:58.970 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:11:58.970 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:11:58.970 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:11:58.971 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:11:58.971 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 16.2014ms
2023-11-08 10:11:58.974 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:11:58.975 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:11:58.975 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 5.1921ms
2023-11-08 10:11:58.975 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:11:58.975 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 22.1492ms
2023-11-08 10:11:59.003 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=YrSu0rccFMd_KiFCWYz-Pg - -
2023-11-08 10:11:59.003 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:11:59.003 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:14:56.524 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books - -
2023-11-08 10:14:56.525 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:14:56.525 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books - - - 204 - - 0.3813ms
2023-11-08 10:14:56.526 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/api/Books application/json 152
2023-11-08 10:14:56.526 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:14:56.526 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi)'
2023-11-08 10:14:56.553 +03:00 [INF] Route matched with {action = "AddBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddBookAsync(Application.Features.Books.Commands.AddBook.BookAddCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:14:56.563 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 200), @p2='?' (Size = 4000), @p3='?' (DbType = DateTimeOffset), @p4='?' (Size = 4000), @p5='?' (DbType = DateTimeOffset), @p6='?' (DbType = Int32), @p7='?' (Size = 500), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [Author], [CreatedByUserId], [CreatedOn], [DeletedByUserId], [DeletedOn], [Genre], [ImageUrl], [IsAvailable], [IsDeleted], [ModifiedByUserId], [ModifiedOn], [Title])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2023-11-08 10:14:56.564 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 10:14:56.564 +03:00 [INF] Executed action WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi) in 10.8309ms
2023-11-08 10:14:56.564 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi)'
2023-11-08 10:14:56.565 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/api/Books application/json 152 - 200 - application/json;+charset=utf-8 38.8126ms
2023-11-08 10:14:56.588 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:14:56.588 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:14:56.589 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.6761ms
2023-11-08 10:14:56.591 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:14:56.591 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:14:56.603 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:14:56.603 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:14:56.610 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:14:56.611 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:14:56.611 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 7.2294ms
2023-11-08 10:14:56.611 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:14:56.612 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 20.6642ms
2023-11-08 10:14:56.628 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:14:56.629 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:14:56.629 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:14:56.630 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:14:56.630 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 1.8952ms
2023-11-08 10:14:56.660 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=w-ZOly-ys_b4TN19G16Vmg - -
2023-11-08 10:14:56.660 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:14:56.660 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:15:15.107 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout - -
2023-11-08 10:15:15.107 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:15:15.108 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout - - - 204 - - 0.5180ms
2023-11-08 10:15:15.113 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout application/json 95
2023-11-08 10:15:15.113 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:15:15.114 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi)'
2023-11-08 10:15:15.114 +03:00 [INF] Route matched with {action = "Checkout", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(System.Guid, Application.Features.Books.Commands.CheckoutBook.BookCheckoutCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:15:15.121 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Author], [t].[CreatedByUserId], [t].[CreatedOn], [t].[DeletedByUserId], [t].[DeletedOn], [t].[Genre], [t].[ImageUrl], [t].[IsAvailable], [t].[IsDeleted], [t].[ModifiedByUserId], [t].[ModifiedOn], [t].[Title], [l].[Id], [l].[BookId], [l].[CreatedByUserId], [l].[CreatedOn], [l].[DeletedByUserId], [l].[DeletedOn], [l].[DueDate], [l].[IsDeleted], [l].[LoanDate], [l].[LoanedOutTo], [l].[ModifiedByUserId], [l].[ModifiedOn], [l].[ReturnedDate]
FROM (
    SELECT TOP(1) [b].[Id], [b].[Author], [b].[CreatedByUserId], [b].[CreatedOn], [b].[DeletedByUserId], [b].[DeletedOn], [b].[Genre], [b].[ImageUrl], [b].[IsAvailable], [b].[IsDeleted], [b].[ModifiedByUserId], [b].[ModifiedOn], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__request_BookId_0
) AS [t]
LEFT JOIN [Loans] AS [l] ON [t].[Id] = [l].[BookId]
ORDER BY [t].[Id]
2023-11-08 10:15:15.158 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Boolean), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (DbType = DateTimeOffset), @p8='?' (DbType = DateTimeOffset), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 200), @p12='?' (Size = 4000), @p13='?' (DbType = DateTimeOffset), @p14='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Books] SET [IsAvailable] = @p0
OUTPUT 1
WHERE [Id] = @p1;
INSERT INTO [Loans] ([Id], [BookId], [CreatedByUserId], [CreatedOn], [DeletedByUserId], [DeletedOn], [DueDate], [IsDeleted], [LoanDate], [LoanedOutTo], [ModifiedByUserId], [ModifiedOn], [ReturnedDate])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2023-11-08 10:15:15.164 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 10:15:15.164 +03:00 [INF] Executed action WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi) in 49.5829ms
2023-11-08 10:15:15.164 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi)'
2023-11-08 10:15:15.164 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout application/json 95 - 200 - application/json;+charset=utf-8 51.4437ms
2023-11-08 10:15:15.173 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:15:15.173 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:15:15.174 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:15:15.174 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:15:15.206 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:15:15.207 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:15:15.208 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 4.7416ms
2023-11-08 10:15:15.208 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:15:15.208 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 35.0910ms
2023-11-08 10:15:36.373 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/return - -
2023-11-08 10:15:36.373 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:15:36.373 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/return - - - 204 - - 0.4030ms
2023-11-08 10:15:36.374 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/return application/json 49
2023-11-08 10:15:36.374 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:15:36.403 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi)'
2023-11-08 10:15:36.403 +03:00 [INF] Route matched with {action = "Return", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Return(Application.Features.Books.Commands.AddBook.BookReturnCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:15:36.408 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [l].[Id], [l].[BookId], [l].[CreatedByUserId], [l].[CreatedOn], [l].[DeletedByUserId], [l].[DeletedOn], [l].[DueDate], [l].[IsDeleted], [l].[LoanDate], [l].[LoanedOutTo], [l].[ModifiedByUserId], [l].[ModifiedOn], [l].[ReturnedDate]
FROM [Loans] AS [l]
WHERE [l].[BookId] = @__request_BookId_0 AND ([l].[ReturnedDate] IS NULL)
2023-11-08 10:15:36.410 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CreatedByUserId], [b].[CreatedOn], [b].[DeletedByUserId], [b].[DeletedOn], [b].[Genre], [b].[ImageUrl], [b].[IsAvailable], [b].[IsDeleted], [b].[ModifiedByUserId], [b].[ModifiedOn], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__request_BookId_0
2023-11-08 10:15:36.413 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Boolean), @p3='?' (DbType = Guid), @p2='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Books] SET [IsAvailable] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Loans] SET [ReturnedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2023-11-08 10:15:36.417 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 10:15:36.417 +03:00 [INF] Executed action WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi) in 13.4555ms
2023-11-08 10:15:36.417 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi)'
2023-11-08 10:15:36.417 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/return application/json 49 - 200 - application/json;+charset=utf-8 43.0103ms
2023-11-08 10:15:43.447 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:15:43.447 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=YrSu0rccFMd_KiFCWYz-Pg - - - 101 - - 224460.5006ms
2023-11-08 10:15:44.779 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:15:44.779 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:15:44.779 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:15:44.779 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:15:44.779 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.4953ms
2023-11-08 10:15:44.779 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:15:44.781 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:15:44.803 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:15:44.803 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:15:44.804 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:15:44.804 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:15:44.804 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 23.1595ms
2023-11-08 10:15:44.807 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:15:44.808 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:15:44.808 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 4.9594ms
2023-11-08 10:15:44.809 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:15:44.809 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 30.1610ms
2023-11-08 10:15:44.827 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=xnwbtWwaM5zeYo_CO-DMzw - -
2023-11-08 10:15:44.827 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:15:44.827 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:16:36.756 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:16:36.756 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=xnwbtWwaM5zeYo_CO-DMzw - - - 101 - - 51929.1184ms
2023-11-08 10:16:38.117 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:16:38.117 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:16:38.117 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:16:38.117 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:16:38.117 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.4217ms
2023-11-08 10:16:38.118 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:16:38.119 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:16:38.154 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:16:38.154 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:16:38.154 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:16:38.154 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:16:38.155 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 35.1404ms
2023-11-08 10:16:38.158 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:16:38.158 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:16:38.159 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 4.7412ms
2023-11-08 10:16:38.159 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:16:38.159 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 41.7702ms
2023-11-08 10:16:38.179 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=c51FOVuZVXxUwZXtNBctVQ - -
2023-11-08 10:16:38.179 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:16:38.179 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:16:40.553 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:16:40.553 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:16:40.553 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=3rvd2l3b4Mey7osM75Eqdw - - - 101 - - 286111.7144ms
2023-11-08 10:16:40.553 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=w-ZOly-ys_b4TN19G16Vmg - - - 101 - - 103892.7227ms
2023-11-08 10:16:42.067 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:16:42.068 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:16:42.068 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.4710ms
2023-11-08 10:16:42.070 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:16:42.070 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:16:42.080 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:16:42.104 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:16:42.104 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:16:42.104 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:16:42.104 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:16:42.105 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:16:42.105 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 24.6354ms
2023-11-08 10:16:42.109 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:16:42.109 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:16:42.110 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 5.7165ms
2023-11-08 10:16:42.110 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:16:42.110 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 40.2736ms
2023-11-08 10:16:42.129 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=lVlP0nK8nsCB7Gqi7yalew - -
2023-11-08 10:16:42.129 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:16:42.129 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:17:05.342 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books - -
2023-11-08 10:17:05.343 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:17:05.343 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books - - - 204 - - 1.1287ms
2023-11-08 10:17:05.344 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/api/Books application/json 152
2023-11-08 10:17:05.344 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:17:05.344 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi)'
2023-11-08 10:17:05.354 +03:00 [INF] Route matched with {action = "AddBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddBookAsync(Application.Features.Books.Commands.AddBook.BookAddCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:17:05.360 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 200), @p2='?' (Size = 4000), @p3='?' (DbType = DateTimeOffset), @p4='?' (Size = 4000), @p5='?' (DbType = DateTimeOffset), @p6='?' (DbType = Int32), @p7='?' (Size = 500), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [Author], [CreatedByUserId], [CreatedOn], [DeletedByUserId], [DeletedOn], [Genre], [ImageUrl], [IsAvailable], [IsDeleted], [ModifiedByUserId], [ModifiedOn], [Title])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2023-11-08 10:17:05.361 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 10:17:05.361 +03:00 [INF] Executed action WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi) in 6.8125ms
2023-11-08 10:17:05.361 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi)'
2023-11-08 10:17:05.361 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/api/Books application/json 152 - 200 - application/json;+charset=utf-8 17.2638ms
2023-11-08 10:17:05.380 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:17:05.380 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:17:05.380 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.6658ms
2023-11-08 10:17:05.389 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:17:05.389 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:17:05.390 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:17:05.404 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:17:05.404 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:17:05.404 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:17:05.405 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:17:05.405 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:17:05.406 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 15.7798ms
2023-11-08 10:17:05.408 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:17:05.409 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:17:05.410 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 5.4884ms
2023-11-08 10:17:05.410 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:17:05.410 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 21.7959ms
2023-11-08 10:17:05.436 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=sDfa4EKp8WzoQOBwd-ZVqg - -
2023-11-08 10:17:05.436 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:17:05.437 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:17:20.434 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout - -
2023-11-08 10:17:20.435 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:17:20.436 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout - - - 204 - - 1.0512ms
2023-11-08 10:17:20.438 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout application/json 95
2023-11-08 10:17:20.438 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:17:20.454 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi)'
2023-11-08 10:17:20.455 +03:00 [INF] Route matched with {action = "Checkout", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(System.Guid, Application.Features.Books.Commands.CheckoutBook.BookCheckoutCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:17:20.461 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Author], [t].[CreatedByUserId], [t].[CreatedOn], [t].[DeletedByUserId], [t].[DeletedOn], [t].[Genre], [t].[ImageUrl], [t].[IsAvailable], [t].[IsDeleted], [t].[ModifiedByUserId], [t].[ModifiedOn], [t].[Title], [l].[Id], [l].[BookId], [l].[CreatedByUserId], [l].[CreatedOn], [l].[DeletedByUserId], [l].[DeletedOn], [l].[DueDate], [l].[IsDeleted], [l].[LoanDate], [l].[LoanedOutTo], [l].[ModifiedByUserId], [l].[ModifiedOn], [l].[ReturnedDate]
FROM (
    SELECT TOP(1) [b].[Id], [b].[Author], [b].[CreatedByUserId], [b].[CreatedOn], [b].[DeletedByUserId], [b].[DeletedOn], [b].[Genre], [b].[ImageUrl], [b].[IsAvailable], [b].[IsDeleted], [b].[ModifiedByUserId], [b].[ModifiedOn], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__request_BookId_0
) AS [t]
LEFT JOIN [Loans] AS [l] ON [t].[Id] = [l].[BookId]
ORDER BY [t].[Id]
2023-11-08 10:17:20.465 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Boolean), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (DbType = DateTimeOffset), @p8='?' (DbType = DateTimeOffset), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 200), @p12='?' (Size = 4000), @p13='?' (DbType = DateTimeOffset), @p14='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Books] SET [IsAvailable] = @p0
OUTPUT 1
WHERE [Id] = @p1;
INSERT INTO [Loans] ([Id], [BookId], [CreatedByUserId], [CreatedOn], [DeletedByUserId], [DeletedOn], [DueDate], [IsDeleted], [LoanDate], [LoanedOutTo], [ModifiedByUserId], [ModifiedOn], [ReturnedDate])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2023-11-08 10:17:20.468 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 10:17:20.469 +03:00 [INF] Executed action WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi) in 13.639ms
2023-11-08 10:17:20.469 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi)'
2023-11-08 10:17:20.469 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout application/json 95 - 200 - application/json;+charset=utf-8 30.7088ms
2023-11-08 10:17:20.504 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:17:20.504 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:17:20.504 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:17:20.505 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:17:20.509 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:17:20.510 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:17:20.510 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 5.0173ms
2023-11-08 10:17:20.510 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:17:20.510 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 6.0203ms
2023-11-08 10:17:24.898 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/return - -
2023-11-08 10:17:24.899 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:17:24.899 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/return - - - 204 - - 0.4166ms
2023-11-08 10:17:24.900 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/return application/json 49
2023-11-08 10:17:24.900 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:17:24.904 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi)'
2023-11-08 10:17:24.904 +03:00 [INF] Route matched with {action = "Return", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Return(Application.Features.Books.Commands.AddBook.BookReturnCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:17:24.909 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [l].[Id], [l].[BookId], [l].[CreatedByUserId], [l].[CreatedOn], [l].[DeletedByUserId], [l].[DeletedOn], [l].[DueDate], [l].[IsDeleted], [l].[LoanDate], [l].[LoanedOutTo], [l].[ModifiedByUserId], [l].[ModifiedOn], [l].[ReturnedDate]
FROM [Loans] AS [l]
WHERE [l].[BookId] = @__request_BookId_0 AND ([l].[ReturnedDate] IS NULL)
2023-11-08 10:17:24.912 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CreatedByUserId], [b].[CreatedOn], [b].[DeletedByUserId], [b].[DeletedOn], [b].[Genre], [b].[ImageUrl], [b].[IsAvailable], [b].[IsDeleted], [b].[ModifiedByUserId], [b].[ModifiedOn], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__request_BookId_0
2023-11-08 10:17:24.916 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Boolean), @p3='?' (DbType = Guid), @p2='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Books] SET [IsAvailable] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Loans] SET [ReturnedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2023-11-08 10:17:24.920 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 10:17:24.954 +03:00 [INF] Executed action WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi) in 49.8477ms
2023-11-08 10:17:24.954 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi)'
2023-11-08 10:17:24.955 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/return application/json 49 - 200 - application/json;+charset=utf-8 54.8404ms
2023-11-08 10:39:25.696 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:39:25.698 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:39:25.699 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 4.0552ms
2023-11-08 10:39:25.701 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:39:25.701 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:39:25.715 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:39:25.735 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:39:25.735 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:39:25.735 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:39:25.736 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:39:25.737 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:39:25.744 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 28.5922ms
2023-11-08 10:39:25.753 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=KhZbKJ4O5kJ5plOYRyfaHw - -
2023-11-08 10:39:25.754 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:39:25.754 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:39:25.779 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:39:25.782 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:39:25.783 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 39.0082ms
2023-11-08 10:39:25.783 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:39:25.783 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 82.5776ms
2023-11-08 10:39:38.330 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:39:38.330 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:39:38.331 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=KhZbKJ4O5kJ5plOYRyfaHw - - - 101 - - 12577.8508ms
2023-11-08 10:39:38.331 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=c51FOVuZVXxUwZXtNBctVQ - - - 101 - - 1380173.8705ms
2023-11-08 10:39:39.874 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:39:39.874 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:39:39.875 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:39:39.875 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:39:39.875 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.4537ms
2023-11-08 10:39:39.875 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:39:39.883 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:39:39.882 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:39:39.892 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:39:39.893 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:39:39.893 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:39:39.894 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:39:39.894 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 11.3791ms
2023-11-08 10:39:39.894 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:39:39.894 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:39:39.895 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 20.0369ms
2023-11-08 10:39:39.895 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 12.4216ms
2023-11-08 10:39:39.927 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=EpPBqxyvMRPjYFTbXT7vaQ - -
2023-11-08 10:39:39.933 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:39:39.933 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:39:44.510 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:39:44.510 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:39:44.510 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=sDfa4EKp8WzoQOBwd-ZVqg - - - 101 - - 1359096.1266ms
2023-11-08 10:39:44.510 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=lVlP0nK8nsCB7Gqi7yalew - - - 101 - - 1382403.1839ms
2023-11-08 10:39:45.848 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:39:45.848 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:39:45.848 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:39:45.848 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:39:45.848 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.3362ms
2023-11-08 10:39:45.849 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:39:45.850 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:39:45.882 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:39:45.882 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:39:45.883 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:39:45.883 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:39:45.884 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 33.5895ms
2023-11-08 10:39:45.888 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:39:45.891 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:39:45.891 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 8.3432ms
2023-11-08 10:39:45.891 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:39:45.891 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 43.0436ms
2023-11-08 10:39:45.930 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=w2WYVU-W4VO_1ekq4rY3og - -
2023-11-08 10:39:45.931 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:39:45.931 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:40:18.891 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:40:18.892 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=w2WYVU-W4VO_1ekq4rY3og - - - 101 - - 32962.4566ms
2023-11-08 10:40:20.352 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:40:20.352 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:40:20.352 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.3179ms
2023-11-08 10:40:20.355 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:40:20.355 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:40:20.363 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:40:20.381 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:40:20.381 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:40:20.381 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:40:20.382 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:40:20.383 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:40:20.383 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 20.3544ms
2023-11-08 10:40:20.389 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:40:20.389 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:40:20.389 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 7.753ms
2023-11-08 10:40:20.390 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:40:20.390 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 35.0835ms
2023-11-08 10:40:20.407 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=A95rpv6or8EG5vNpIXnzpA - -
2023-11-08 10:40:20.407 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:40:20.407 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:40:46.454 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:40:46.454 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=A95rpv6or8EG5vNpIXnzpA - - - 101 - - 26047.8040ms
2023-11-08 10:40:47.588 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:40:47.588 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:40:47.589 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.6655ms
2023-11-08 10:40:47.589 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:40:47.589 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:40:47.589 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:40:47.590 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:40:47.590 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:40:47.592 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:40:47.592 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:40:47.593 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:40:47.593 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 2.8566ms
2023-11-08 10:40:47.596 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:40:47.631 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:40:47.632 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 39.9707ms
2023-11-08 10:40:47.632 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:40:47.632 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 43.1490ms
2023-11-08 10:40:47.646 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=1S8RN0dF59G6QB3W8cAUjQ - -
2023-11-08 10:40:47.647 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:40:47.647 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:41:10.368 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout - -
2023-11-08 10:41:10.369 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:41:10.369 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout - - - 204 - - 0.8233ms
2023-11-08 10:41:10.377 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout application/json 95
2023-11-08 10:41:10.377 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:41:10.382 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi)'
2023-11-08 10:41:10.382 +03:00 [INF] Route matched with {action = "Checkout", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(System.Guid, Application.Features.Books.Commands.CheckoutBook.BookCheckoutCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:41:10.396 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Author], [t].[CreatedByUserId], [t].[CreatedOn], [t].[DeletedByUserId], [t].[DeletedOn], [t].[Genre], [t].[ImageUrl], [t].[IsAvailable], [t].[IsDeleted], [t].[ModifiedByUserId], [t].[ModifiedOn], [t].[Title], [l].[Id], [l].[BookId], [l].[CreatedByUserId], [l].[CreatedOn], [l].[DeletedByUserId], [l].[DeletedOn], [l].[DueDate], [l].[IsDeleted], [l].[LoanDate], [l].[LoanedOutTo], [l].[ModifiedByUserId], [l].[ModifiedOn], [l].[ReturnedDate]
FROM (
    SELECT TOP(1) [b].[Id], [b].[Author], [b].[CreatedByUserId], [b].[CreatedOn], [b].[DeletedByUserId], [b].[DeletedOn], [b].[Genre], [b].[ImageUrl], [b].[IsAvailable], [b].[IsDeleted], [b].[ModifiedByUserId], [b].[ModifiedOn], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__request_BookId_0
) AS [t]
LEFT JOIN [Loans] AS [l] ON [t].[Id] = [l].[BookId]
ORDER BY [t].[Id]
2023-11-08 10:41:10.442 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Boolean), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (DbType = DateTimeOffset), @p8='?' (DbType = DateTimeOffset), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 200), @p12='?' (Size = 4000), @p13='?' (DbType = DateTimeOffset), @p14='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Books] SET [IsAvailable] = @p0
OUTPUT 1
WHERE [Id] = @p1;
INSERT INTO [Loans] ([Id], [BookId], [CreatedByUserId], [CreatedOn], [DeletedByUserId], [DeletedOn], [DueDate], [IsDeleted], [LoanDate], [LoanedOutTo], [ModifiedByUserId], [ModifiedOn], [ReturnedDate])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2023-11-08 10:41:10.446 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 10:41:10.447 +03:00 [INF] Executed action WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi) in 64.6804ms
2023-11-08 10:41:10.447 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi)'
2023-11-08 10:41:10.447 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout application/json 95 - 200 - application/json;+charset=utf-8 70.3663ms
2023-11-08 10:41:10.481 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:41:10.482 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:41:10.482 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:41:10.482 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:41:10.485 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:41:10.486 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:41:10.486 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 4.1044ms
2023-11-08 10:41:10.486 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:41:10.487 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 5.4127ms
2023-11-08 10:41:15.302 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/return - -
2023-11-08 10:41:15.302 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:41:15.303 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/return - - - 204 - - 0.2901ms
2023-11-08 10:41:15.303 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/return application/json 49
2023-11-08 10:41:15.303 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:41:15.331 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi)'
2023-11-08 10:41:15.331 +03:00 [INF] Route matched with {action = "Return", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Return(Application.Features.Books.Commands.AddBook.BookReturnCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:41:15.336 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [l].[Id], [l].[BookId], [l].[CreatedByUserId], [l].[CreatedOn], [l].[DeletedByUserId], [l].[DeletedOn], [l].[DueDate], [l].[IsDeleted], [l].[LoanDate], [l].[LoanedOutTo], [l].[ModifiedByUserId], [l].[ModifiedOn], [l].[ReturnedDate]
FROM [Loans] AS [l]
WHERE [l].[BookId] = @__request_BookId_0 AND ([l].[ReturnedDate] IS NULL)
2023-11-08 10:41:15.339 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CreatedByUserId], [b].[CreatedOn], [b].[DeletedByUserId], [b].[DeletedOn], [b].[Genre], [b].[ImageUrl], [b].[IsAvailable], [b].[IsDeleted], [b].[ModifiedByUserId], [b].[ModifiedOn], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__request_BookId_0
2023-11-08 10:41:15.342 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Boolean), @p3='?' (DbType = Guid), @p2='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Books] SET [IsAvailable] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Loans] SET [ReturnedDate] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2023-11-08 10:41:15.346 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 10:41:15.346 +03:00 [INF] Executed action WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi) in 14.1288ms
2023-11-08 10:41:15.346 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.Return (LibraryManagement.WebApi)'
2023-11-08 10:41:15.346 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/return application/json 49 - 200 - application/json;+charset=utf-8 42.9711ms
2023-11-08 10:41:48.865 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignInStart - -
2023-11-08 10:41:48.866 +03:00 [INF] Executing endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi)'
2023-11-08 10:41:48.866 +03:00 [INF] Route matched with {action = "GoogleSignInStart", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GoogleSignInStartAsync() on controller WebApi.Controllers.AuthenticationController (LibraryManagement.WebApi).
2023-11-08 10:41:48.883 +03:00 [INF] Executing RedirectResult, redirecting to https://accounts.google.com/o/oauth2/v2/auth?client_id=424536091498-qqtt1rg7jtr9hr99hbrvokl7krq5ls6g.apps.googleusercontent.com&response_type=code&scope=openid%20email%20profile&access_type=offline&redirect_uri=https://localhost:7109/api/Authentication/GoogleSignIn.
2023-11-08 10:41:48.883 +03:00 [INF] Executed action WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi) in 1.5876ms
2023-11-08 10:41:48.883 +03:00 [INF] Executed endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInStartAsync (LibraryManagement.WebApi)'
2023-11-08 10:41:48.883 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignInStart - - - 302 0 - 18.0438ms
2023-11-08 10:41:49.125 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:41:49.125 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=1S8RN0dF59G6QB3W8cAUjQ - - - 101 - - 61478.7195ms
2023-11-08 10:41:51.365 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignIn?code=4%2F0AfJohXkdu_E-ohciMv_-6OxEhh63ozraFT4FKn3acADroJePqhK0lhE_ujNGfsOm0xucmg&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=consent - -
2023-11-08 10:41:51.365 +03:00 [INF] Executing endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInAsync (LibraryManagement.WebApi)'
2023-11-08 10:41:51.365 +03:00 [INF] Route matched with {action = "GoogleSignIn", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GoogleSignInAsync(System.String, System.Threading.CancellationToken) on controller WebApi.Controllers.AuthenticationController (LibraryManagement.WebApi).
2023-11-08 10:41:51.605 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedByUserId], [a].[CreatedOn], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[ModifiedByUserId], [a].[ModifiedOn], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2023-11-08 10:41:51.607 +03:00 [INF] Executing RedirectResult, redirecting to http://localhost:5173/social-login?access_token=eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiIyYTVjNjQ2NC01ODYzLTRhMjItOWNiYS1lOGIxYjYxYTYwYTQiLCJlbWFpbCI6IjRzb2Z0d2FyZWhvdXNlNEBnbWFpbC5jb20iLCJzdWIiOiIyYTVjNjQ2NC01ODYzLTRhMjItOWNiYS1lOGIxYjYxYTYwYTQiLCJnaXZlbl9uYW1lIjoiU29mdHdhcmUiLCJmYW1pbHlfbmFtZSI6IkhvdXNlIiwianRpIjoiY2VlNzAwZGMtYzEwNi00ZjlmLTg3MWEtNmU5NWU0YmUyYmZlIiwiZXhwIjoxNjk5NDMyOTExLCJpc3MiOiJDcmF3bGVyIiwiYXVkIjoiQ3Jhd2xlciJ9.QUjJyuES0c6RBRqD90vFWLVNsL2nX_0sO4f6riChLkY&expiry_date=-8585021739738710458.
2023-11-08 10:41:51.631 +03:00 [INF] Executed action WebApi.Controllers.AuthenticationController.GoogleSignInAsync (LibraryManagement.WebApi) in 249.9945ms
2023-11-08 10:41:51.631 +03:00 [INF] Executed endpoint 'WebApi.Controllers.AuthenticationController.GoogleSignInAsync (LibraryManagement.WebApi)'
2023-11-08 10:41:51.631 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Authentication/GoogleSignIn?code=4%2F0AfJohXkdu_E-ohciMv_-6OxEhh63ozraFT4FKn3acADroJePqhK0lhE_ujNGfsOm0xucmg&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=consent - - - 302 0 - 266.8216ms
2023-11-08 10:41:51.928 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:41:51.928 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:41:51.928 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:41:51.929 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.6803ms
2023-11-08 10:41:51.928 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:41:51.932 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:41:51.932 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:41:51.932 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:41:51.933 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:41:51.933 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:41:51.934 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:41:51.934 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 1.5754ms
2023-11-08 10:41:51.937 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:41:51.938 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:41:51.938 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 6.1443ms
2023-11-08 10:41:51.939 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:41:51.939 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 10.6574ms
2023-11-08 10:41:52.053 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=x-NZZsmMGi59U52mR7tvyA - -
2023-11-08 10:41:52.053 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:41:52.053 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:42:13.664 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:42:13.664 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=EpPBqxyvMRPjYFTbXT7vaQ - - - 101 - - 153737.1506ms
2023-11-08 10:42:15.801 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:42:15.802 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:42:15.802 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.5370ms
2023-11-08 10:42:15.807 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:42:15.807 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:42:15.808 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:42:15.831 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:42:15.831 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:42:15.832 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:42:15.832 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:42:15.833 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:42:15.833 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 24.9257ms
2023-11-08 10:42:15.837 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:42:15.838 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:42:15.838 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 5.5442ms
2023-11-08 10:42:15.838 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:42:15.839 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 31.6372ms
2023-11-08 10:42:15.854 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=hfG5oYiUsZ3q4PE_ZkLuvg - -
2023-11-08 10:42:15.855 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:42:15.855 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:43:06.717 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books - -
2023-11-08 10:43:06.717 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:43:06.717 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books - - - 204 - - 0.6548ms
2023-11-08 10:43:06.719 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/api/Books application/json 188
2023-11-08 10:43:06.719 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:43:06.719 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi)'
2023-11-08 10:43:06.732 +03:00 [INF] Route matched with {action = "AddBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddBookAsync(Application.Features.Books.Commands.AddBook.BookAddCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:43:06.740 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 200), @p2='?' (Size = 4000), @p3='?' (DbType = DateTimeOffset), @p4='?' (Size = 4000), @p5='?' (DbType = DateTimeOffset), @p6='?' (DbType = Int32), @p7='?' (Size = 500), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [Author], [CreatedByUserId], [CreatedOn], [DeletedByUserId], [DeletedOn], [Genre], [ImageUrl], [IsAvailable], [IsDeleted], [ModifiedByUserId], [ModifiedOn], [Title])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2023-11-08 10:43:06.741 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 10:43:06.741 +03:00 [INF] Executed action WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi) in 9.0038ms
2023-11-08 10:43:06.741 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi)'
2023-11-08 10:43:06.742 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/api/Books application/json 188 - 200 - application/json;+charset=utf-8 22.5291ms
2023-11-08 10:43:06.770 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:43:06.770 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:43:06.771 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.6477ms
2023-11-08 10:43:06.771 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:43:06.771 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:43:06.773 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:43:06.784 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:43:06.784 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:43:06.784 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:43:06.784 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:43:06.786 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:43:06.786 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 13.5194ms
2023-11-08 10:43:06.789 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:43:06.790 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:43:06.791 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 6.8135ms
2023-11-08 10:43:06.792 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:43:06.792 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 20.7377ms
2023-11-08 10:43:06.811 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=ujzzBDvSQslAI3sRkFdkrg - -
2023-11-08 10:43:06.812 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:43:06.812 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:43:13.062 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:43:13.063 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=ujzzBDvSQslAI3sRkFdkrg - - - 101 - - 6251.1294ms
2023-11-08 10:43:13.063 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:43:13.063 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=x-NZZsmMGi59U52mR7tvyA - - - 101 - - 81009.7846ms
2023-11-08 10:43:14.577 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:43:14.578 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:43:14.578 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 1.1265ms
2023-11-08 10:43:14.581 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:43:14.581 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:43:14.583 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:43:14.583 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:43:14.583 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:43:14.583 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:43:14.633 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:43:14.634 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:43:14.634 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 51.2267ms
2023-11-08 10:43:14.639 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:43:14.640 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:43:14.640 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 7.5737ms
2023-11-08 10:43:14.640 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:43:14.641 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 60.1090ms
2023-11-08 10:43:14.661 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=v1aDncZ2x78lKioKzD0gWg - -
2023-11-08 10:43:14.662 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:43:14.662 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:46:32.847 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:46:32.849 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=v1aDncZ2x78lKioKzD0gWg - - - 101 - - 198186.1232ms
2023-11-08 10:46:34.270 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:46:34.271 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:46:34.271 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 1.5523ms
2023-11-08 10:46:34.275 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:46:34.277 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:46:34.279 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:46:34.281 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:46:34.291 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:46:34.293 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:46:34.294 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 13.255ms
2023-11-08 10:46:34.299 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:46:34.300 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 24.9319ms
2023-11-08 10:46:34.300 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:46:34.300 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:46:34.300 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:46:34.326 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:46:34.326 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 26.2629ms
2023-11-08 10:46:34.344 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=EV9_rBof6m_Zn84jkPZYKA - -
2023-11-08 10:46:34.344 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:46:34.344 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:47:06.059 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books - -
2023-11-08 10:47:06.060 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:47:06.060 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books - - - 204 - - 0.8781ms
2023-11-08 10:47:06.061 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/api/Books application/json 152
2023-11-08 10:47:06.061 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:47:06.061 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi)'
2023-11-08 10:47:06.062 +03:00 [INF] Route matched with {action = "AddBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddBookAsync(Application.Features.Books.Commands.AddBook.BookAddCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:47:06.069 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 200), @p2='?' (Size = 4000), @p3='?' (DbType = DateTimeOffset), @p4='?' (Size = 4000), @p5='?' (DbType = DateTimeOffset), @p6='?' (DbType = Int32), @p7='?' (Size = 500), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Books] ([Id], [Author], [CreatedByUserId], [CreatedOn], [DeletedByUserId], [DeletedOn], [Genre], [ImageUrl], [IsAvailable], [IsDeleted], [ModifiedByUserId], [ModifiedOn], [Title])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2023-11-08 10:47:06.070 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 10:47:06.070 +03:00 [INF] Executed action WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi) in 8.3868ms
2023-11-08 10:47:06.070 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.AddBookAsync (LibraryManagement.WebApi)'
2023-11-08 10:47:06.070 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/api/Books application/json 152 - 200 - application/json;+charset=utf-8 9.5173ms
2023-11-08 10:47:06.098 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - -
2023-11-08 10:47:06.098 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:47:06.098 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - - - 204 - - 0.3800ms
2023-11-08 10:47:06.102 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:47:06.103 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:47:06.103 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0
2023-11-08 10:47:06.103 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:47:06.103 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:47:06.103 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:47:06.103 +03:00 [INF] Executing endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:47:06.104 +03:00 [INF] Executed endpoint '/Hubs/BookHub/negotiate'
2023-11-08 10:47:06.104 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7109/Hubs/BookHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 1.2968ms
2023-11-08 10:47:06.108 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:47:06.109 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:47:06.109 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 5.806ms
2023-11-08 10:47:06.109 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:47:06.115 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 13.1617ms
2023-11-08 10:47:06.128 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=7VVvBZgagqXAbcgGkmsLgQ - -
2023-11-08 10:47:06.128 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:47:06.128 +03:00 [INF] Executing endpoint '/Hubs/BookHub'
2023-11-08 10:47:22.845 +03:00 [INF] Request starting HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout - -
2023-11-08 10:47:22.846 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:47:22.846 +03:00 [INF] Request finished HTTP/1.1 OPTIONS https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout - - - 204 - - 0.9270ms
2023-11-08 10:47:22.851 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout application/json 95
2023-11-08 10:47:22.851 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:47:22.852 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi)'
2023-11-08 10:47:22.852 +03:00 [INF] Route matched with {action = "Checkout", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout(System.Guid, Application.Features.Books.Commands.CheckoutBook.BookCheckoutCommand) on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:47:22.857 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_BookId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Author], [t].[CreatedByUserId], [t].[CreatedOn], [t].[DeletedByUserId], [t].[DeletedOn], [t].[Genre], [t].[ImageUrl], [t].[IsAvailable], [t].[IsDeleted], [t].[ModifiedByUserId], [t].[ModifiedOn], [t].[Title], [l].[Id], [l].[BookId], [l].[CreatedByUserId], [l].[CreatedOn], [l].[DeletedByUserId], [l].[DeletedOn], [l].[DueDate], [l].[IsDeleted], [l].[LoanDate], [l].[LoanedOutTo], [l].[ModifiedByUserId], [l].[ModifiedOn], [l].[ReturnedDate]
FROM (
    SELECT TOP(1) [b].[Id], [b].[Author], [b].[CreatedByUserId], [b].[CreatedOn], [b].[DeletedByUserId], [b].[DeletedOn], [b].[Genre], [b].[ImageUrl], [b].[IsAvailable], [b].[IsDeleted], [b].[ModifiedByUserId], [b].[ModifiedOn], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__request_BookId_0
) AS [t]
LEFT JOIN [Loans] AS [l] ON [t].[Id] = [l].[BookId]
ORDER BY [t].[Id]
2023-11-08 10:47:22.864 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Boolean), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (Size = 4000), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (DbType = DateTimeOffset), @p8='?' (DbType = DateTimeOffset), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 200), @p12='?' (Size = 4000), @p13='?' (DbType = DateTimeOffset), @p14='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Books] SET [IsAvailable] = @p0
OUTPUT 1
WHERE [Id] = @p1;
INSERT INTO [Loans] ([Id], [BookId], [CreatedByUserId], [CreatedOn], [DeletedByUserId], [DeletedOn], [DueDate], [IsDeleted], [LoanDate], [LoanedOutTo], [ModifiedByUserId], [ModifiedOn], [ReturnedDate])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2023-11-08 10:47:22.870 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.Response`1[[System.Guid, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-11-08 10:47:22.871 +03:00 [INF] Executed action WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi) in 17.7779ms
2023-11-08 10:47:22.871 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.Checkout (LibraryManagement.WebApi)'
2023-11-08 10:47:22.871 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7109/api/Books/67078676-31fe-406e-dc79-08dbdedf146b/checkout application/json 95 - 200 - application/json;+charset=utf-8 19.8796ms
2023-11-08 10:47:22.880 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7109/api/Books - -
2023-11-08 10:47:22.880 +03:00 [INF] CORS policy execution successful.
2023-11-08 10:47:22.880 +03:00 [INF] Executing endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:47:22.880 +03:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooksAsync() on controller WebApi.Controllers.BooksController (LibraryManagement.WebApi).
2023-11-08 10:47:22.884 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[Title], [b].[Author], [b].[ImageUrl], [b].[Genre], CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Loans] AS [l]
        WHERE [b].[Id] = [l].[BookId] AND ([l].[ReturnedDate] IS NULL)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [IsAvailable], (
    SELECT TOP(1) [l0].[LoanedOutTo]
    FROM [Loans] AS [l0]
    WHERE [b].[Id] = [l0].[BookId] AND ([l0].[ReturnedDate] IS NULL)) AS [LoanedOutTo], (
    SELECT TOP(1) [l1].[DueDate]
    FROM [Loans] AS [l1]
    WHERE [b].[Id] = [l1].[BookId] AND ([l1].[ReturnedDate] IS NULL)) AS [DueDate]
FROM [Books] AS [b]
ORDER BY [b].[Title]
2023-11-08 10:47:22.885 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.Features.Books.Queries.GetAll.BookGetAllDto, LibraryManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-08 10:47:22.886 +03:00 [INF] Executed action WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi) in 5.1391ms
2023-11-08 10:47:22.886 +03:00 [INF] Executed endpoint 'WebApi.Controllers.BooksController.GetAllBooksAsync (LibraryManagement.WebApi)'
2023-11-08 10:47:22.886 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/api/Books - - - 200 - application/json;+charset=utf-8 6.3850ms
2023-11-08 10:57:39.166 +03:00 [INF] Application is shutting down...
2023-11-08 10:57:39.180 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:57:39.180 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:57:39.180 +03:00 [INF] Executed endpoint '/Hubs/BookHub'
2023-11-08 10:57:39.181 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=EV9_rBof6m_Zn84jkPZYKA - - - 101 - - 664826.4409ms
2023-11-08 10:57:39.181 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=hfG5oYiUsZ3q4PE_ZkLuvg - - - 101 - - 923313.8598ms
2023-11-08 10:57:39.181 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7109/Hubs/BookHub?id=7VVvBZgagqXAbcgGkmsLgQ - - - 101 - - 633042.7770ms
